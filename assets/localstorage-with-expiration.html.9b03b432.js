import{_ as r}from"./plugin-vue_export-helper.21dcd24c.js";import{r as t,c as p,a as n,b as a,w as o,F as u,d as e,e as c,o as d}from"./app.22a70bca.js";const m={},h=n("h1",{id:"localstorage-with-expiration",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#localstorage-with-expiration","aria-hidden":"true"},"#"),e(" localStorage with expiration")],-1),k=n("h2",{id:"question",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#question","aria-hidden":"true"},"#"),e(" Question")],-1),_={href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage",target:"_blank",rel:"noopener noreferrer"},v=e("localStorage"),g=e(" is a simple and handy client-side storage, but "),b={href:"https://www.youtube.com/watch?v=NNuTV-gjlZQ",target:"_blank",rel:"noopener noreferrer"},f=e("you should avoid using it"),w=e(" because it is synchronous."),x=e("Also "),y={href:"https://webkit.org/blog/10218/full-third-party-cookie-blocking-and-more/",target:"_blank",rel:"noopener noreferrer"},S=e("Safari's ITP"),I=e(" actually deletes client-side script-writable storage after 7 days of Safari use without interacting on your website, and localStorage is included."),j=c(`<p>Unlike Cookie, localStorage doesn&#39;t expire.</p><p>In this problem, <strong>please create a localStorage wrapper with expiration support</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myLocalStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;bfe&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dev&#39;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
myLocalStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;bfe&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// &#39;dev&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>after 1 second:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>myLocalStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;bfe&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>FYI</strong></p><p>localStorage is replaced with our own implementation to avoid security error. But the interface is the same, actually you don&#39;t need to care \u{1F603}</p><h2 id="code" tabindex="-1"><a class="header-anchor" href="#code" aria-hidden="true">#</a> Code</h2>`,8),C=n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[e("window"),n("span",{class:"token punctuation"},"."),e("myLocalStorage "),n("span",{class:"token operator"},"="),e(),n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token function"},"getItem"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"key"),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token comment"},"// your code here"),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
  
  `),n("span",{class:"token function"},"setItem"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[e("key"),n("span",{class:"token punctuation"},","),e(" value"),n("span",{class:"token punctuation"},","),e(" maxAge")]),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token comment"},"// your code here"),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
  
  `),n("span",{class:"token function"},"removeItem"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"key"),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token comment"},"// your code here"),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
  
  `),n("span",{class:"token function"},"clear"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token comment"},"// your code here"),e(`
  `),n("span",{class:"token punctuation"},"}"),e(`
`),n("span",{class:"token punctuation"},"}"),e(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),L=c('<h2 id="related" tabindex="-1"><a class="header-anchor" href="#related" aria-hidden="true">#</a> Related</h2><ul><li><a href="./create-your-own-Cookie">create your own Cookie</a></li></ul><h2 id="source" tabindex="-1"><a class="header-anchor" href="#source" aria-hidden="true">#</a> Source</h2>',3),N={href:"https://bigfrontend.dev/problem/localStorage-with-expiration",target:"_blank",rel:"noopener noreferrer"},V=e("Source From");function B(E,F){const s=t("ExternalLinkIcon"),i=t("CodeGroupItem"),l=t("CodeGroup");return d(),p(u,null,[h,k,n("p",null,[n("a",_,[v,a(s)]),g,n("a",b,[f,a(s)]),w]),n("p",null,[x,n("a",y,[S,a(s)]),I]),j,a(l,null,{default:o(()=>[a(i,{title:"javascript",active:""},{default:o(()=>[C]),_:1})]),_:1}),L,n("p",null,[n("a",N,[V,a(s)])])],64)}var T=r(m,[["render",B],["__file","localstorage-with-expiration.html.vue"]]);export{T as default};
